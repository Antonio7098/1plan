# Sprint SPR-003 — Features & Sprints

Add endpoints for features and sprints; CSV import/export; seed.

## Meta
- Sprint ID: SPR-003
- Status: planned
- Start date: <YYYY-MM-DD>
- End date: <YYYY-MM-DD>
- Links: [Overview](./overview.md) · [PRD](../../planning/prd.md) · [Technical Overview](../../planning/technical-overview.md) · [Features CSV](../features.csv)

## Objectives (Tick when achieved)
- [ ] Features CRUD endpoints + CSV import/export
- [ ] Sprints CRUD endpoints + checklist items
- [ ] Seed project with example features & sprints

## Planned Tasks
- [ ] Implement `/v1/features` CRUD; validate feature_id uniqueness
- [ ] Implement `/v1/sprints` CRUD; code uniqueness (e.g., SPR-001)
- [ ] Nested sprint items: add/update/check
- [ ] CSV import/export for features with schema validation
- [ ] Seed route or script for local bootstrap

## Scope
In scope: features, sprints, CSV, seed

Out of scope: search & rate limits

## Features in this Sprint
- [ ] FEAT-005 — Features CRUD Endpoints
- [ ] FEAT-006 — Sprints CRUD & Items Endpoints
- [ ] FEAT-019 — CSV Import/Export for Features
- [ ] FEAT-020 — Seed & Bootstrap Project

## Acceptance Criteria
- [ ] CRUD works with validation and conflicts (409) handled
- [ ] CSV import rejects invalid rows with line diagnostics
- [ ] Seed generates a usable demo project

## Risks & Mitigations
- Risk: CSV encoding/format · Mitigation: strict headers + examples
- Risk: referential integrity · Mitigation: DB constraints + tests

## QA & Testing
- [ ] Integration tests for features & sprints flows
- [ ] Sample CSV fixtures + round-trip tests

## Technical Details

### Database Models
- Collections/Tables impacted: Feature, Sprint, SprintItem
- New/changed fields: Feature(id, projectId, featureId, title, version, status, area), Sprint(id, projectId, code, name, status, startDate, endDate), SprintItem(id, sprintId, checked, text, order)
- Constraints/validation: Feature.featureId unique per project; Sprint.code unique per project; Feature.status enum; Sprint.status enum
- Indexes (read/write paths): Feature by projectId, status; Sprint by projectId, status; SprintItem by sprintId, order
- Migrations: add Feature, Sprint, SprintItem tables — Backfill plan: CSV import for initial features
- Data retention: Features/Sprints retained; SprintItems cascade delete with Sprint
