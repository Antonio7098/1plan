# Sprint SPR-003 — Features & Sprints

Add endpoints for features and sprints; CSV import/export; seed.

## Meta
- Sprint ID: SPR-003
- Status: completed ✅
- Start date: 2025-08-20
- End date: 2025-08-20
- Links: [Overview](./overview.md) · [PRD](../../planning/prd.md) · [Technical Overview](../../planning/technical-overview.md) · [Features CSV](../features.csv)

## Objectives (Tick when achieved)
- [x] Features CRUD endpoints + CSV import/export
- [x] Sprints CRUD endpoints + checklist items
- [x] Seed project with example features & sprints

## Planned Tasks
- [x] Implement `/v1/features` CRUD; validate feature_id uniqueness
- [x] Implement `/v1/sprints` CRUD; code uniqueness (e.g., SPR-001)
- [x] Nested sprint items: add/update/check
- [x] CSV import/export for features with schema validation
- [x] Seed route or script for local bootstrap
- [x] Database constraints and foreign key validations
- [x] Optimistic locking for concurrent updates
- [x] Data validation rules and business logic constraints
- [x] CSV import validation with detailed error reporting
- [x] Bulk operation transaction handling
- [x] Data archival and retention policies
- [x] Feature flag management for gradual rollouts

## Scope
In scope: features, sprints, CSV, seed

Out of scope: search & rate limits

## Features in this Sprint
- [x] FEAT-005 — Features CRUD Endpoints
- [x] FEAT-006 — Sprints CRUD & Items Endpoints
- [x] FEAT-019 — CSV Import/Export for Features
- [x] FEAT-020 — Seed & Bootstrap Project

## Acceptance Criteria
- [x] CRUD works with validation and conflicts (409) handled
- [x] CSV import rejects invalid rows with line diagnostics
- [x] Seed generates a usable demo project

## Risks & Mitigations
- Risk: CSV encoding/format · Mitigation: strict headers + examples
- Risk: referential integrity · Mitigation: DB constraints + tests

## QA & Testing
- [x] Integration tests for features & sprints flows
- [x] Sample CSV fixtures + round-trip tests

## Technical Details

### Database Models
- Collections/Tables impacted: Feature, Sprint, SprintItem
- New/changed fields: Feature(id, projectId, featureId, title, version, status, area), Sprint(id, projectId, code, name, status, startDate, endDate), SprintItem(id, sprintId, checked, text, order)
- Constraints/validation: Feature.featureId unique per project; Sprint.code unique per project; Feature.status enum; Sprint.status enum
- Indexes (read/write paths): Feature by projectId, status; Sprint by projectId, status; SprintItem by sprintId, order
- Migrations: add Feature, Sprint, SprintItem tables — Backfill plan: CSV import for initial features
- Data retention: Features/Sprints retained; SprintItems cascade delete with Sprint