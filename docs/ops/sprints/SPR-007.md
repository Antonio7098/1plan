# Sprint SPR-007 — Auth & Scoping

Introduce service token auth and project scoping; prepare for RBAC later.

## Meta
- Sprint ID: SPR-007
- Status: planned
- Start date: <YYYY-MM-DD>
- End date: <YYYY-MM-DD>
- Links: [Overview](./overview.md) · [PRD](../../planning/prd.md) · [Technical Overview](../../planning/technical-overview.md) · [Features CSV](../features.csv)

## Objectives (Tick when achieved)
- [ ] Service token auth for MCP → API
- [ ] Project-scoped queries and writes
- [ ] Config examples for rotating tokens

## Planned Tasks
- [ ] Implement token middleware; scopes: project:read/write
- [ ] Ensure all queries include project scoping
- [ ] Add docs for secrets management and rotation
- [ ] Multi-factor authentication support
- [ ] SSO integration (SAML, OIDC)
- [ ] Role-based access control (RBAC) implementation
- [ ] API key rotation and lifecycle management
- [ ] Session management and timeout policies
- [ ] Audit trail for authentication events
- [ ] Rate limiting per user/role
- [ ] Password policy enforcement

## Scope
In scope: token auth, project scoping

Out of scope: full RBAC (future)

## Features in this Sprint
- [ ] FEAT-010 — Auth: Service Token for MCP
- [ ] FEAT-003 — DB Schema (Projects …) [scoping]
- [ ] FEAT-033 — Feature Flags (config-based) [optional]

## Acceptance Criteria
- [ ] API rejects missing/invalid tokens
- [ ] Unauthorized cross-project access prevented

## Risks & Mitigations
- Risk: token sprawl · Mitigation: scoped tokens, rotation guide

## QA & Testing
- [ ] Integration tests for auth failures and scoping
