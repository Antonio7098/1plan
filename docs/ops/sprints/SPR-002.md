# Sprint SPR-002 — MCP Gateway

Ship MCP stdio server with tool-to-API mapping, resources, pagination, and idempotency.

## Meta
- Sprint ID: SPR-002
- Status: planned
- Start date: <YYYY-MM-DD>
- End date: <YYYY-MM-DD>
- Links: [Overview](./overview.md) · [PRD](../../planning/prd.md) · [Technical Overview](../../planning/technical-overview.md) · [Features CSV](../features.csv)

## Objectives (Tick when achieved)
- [ ] MCP server scaffold (stdio) with config (API URL/TOKEN)
- [ ] Tools mapped to API operations (docs/features/sprints)
- [ ] Read-only resources for common lists
- [ ] Cursor pagination and idempotency supported
- [ ] RequestId propagation MCP→API
- [ ] E2E smoke (MCP -> API -> DB)

## Planned Tasks
- [ ] Create MCP server (TypeScript) with zod arg validation
- [ ] Implement tools: create/list/get/update for docs/features/sprints
- [ ] Map errors (422/404/409/429/5xx) to tool errors
- [ ] Add examples/scripts to exercise tools
- [ ] E2E smoke via CLI, ensure idempotency

## Scope
In scope: MCP + mappings + pagination/idempotency

Out of scope: search, rate limits (handled in SPR-004)

## Features in this Sprint
- [ ] FEAT-016 — MCP Server Scaffold (stdio)
- [ ] FEAT-017 — MCP Tools → API Mapping
- [ ] FEAT-018 — MCP Resources (read-only lists)
- [ ] FEAT-031 — Cursor Pagination Contracts
- [ ] FEAT-012 — Idempotency Keys for Write Ops
- [ ] FEAT-011 — RequestId Propagation End-to-End
- [ ] FEAT-035 — Retry & Backoff Policy (client-side)

## Acceptance Criteria
- [ ] Tools function against local API
- [ ] Pagination cursors honored and documented
- [ ] Idempotent writes with `X-Idempotency-Key`

## Risks & Mitigations
- Risk: tool param drift vs API DTOs · Mitigation: zod shared types or codegen
- Risk: error mapping gaps · Mitigation: e2e negative tests

## QA & Testing
- [ ] E2E MCP smoke covering create/list/update
- [ ] Examples documented in README
